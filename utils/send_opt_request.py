import json
import sys
import requests

rootURL = 'https://lrdcnxcfc3.execute-api.us-west-2.amazonaws.com/'
endpointURL = 'https://lrdcnxcfc3.execute-api.us-west-2.amazonaws.com/result'
authUser = '06aae2ee-2d7e-41c9-87fd-604779c9cdc2'
authPass = 'd2364738-8075-4101-a22c-e4847d99781e'

# verify the user action is authorized, should return 200 status
def check_connection():
    r = requests.get(rootURL, auth=(authUser, authPass))
    print(r.status_code)
    print(r.text)

# returns a json formatted payload for submission
def get_payload():
    testPlayload = '''
        { 
            "UUID": "myTestString",
            "submitSuccess": false,
            "attemptAt": "2022-04-04T17:44:23.841Z",
            "completedAt": "2022-04-04T17:46:23.841Z",
            "attempts": 1,
            "logs": {"testlog": "output"},
            "captcha": [
                {
                    "success": true,
                    "img": "PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE1MyAzNiIgd2lkdGg9IjE1MyIgaGVpZ2h0PSIzNiI+PGRlZnM+PGNsaXBQYXRoIGNsaXBQYXRoVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iY3AxIj48cGF0aCBkPSJtMCAwaDE1M3YzNmgtMTUzeiIgLz48L2NsaXBQYXRoPjxsaW5lYXJHcmFkaWVudCBpZD0iUCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiLz48bGluZWFyR3JhZGllbnQgaWQ9ImcxIiB4MT0iMjguMyIgeTE9IjE4LjEiIHgyPSI1MC44IiB5Mj0iMTguMSIgaHJlZj0iI1AiPjxzdG9wIG9mZnNldD0iLjQiIHN0b3AtY29sb3I9IiNmZjgzMDAiLz48c3RvcCBvZmZzZXQ9Ii42IiBzdG9wLWNvbG9yPSIjZmE5ZjFmIi8+PHN0b3Agb2Zmc2V0PSIuOCIgc3RvcC1jb2xvcj0iI2Y3YjMzNCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxzdHlsZT4uczB7ZmlsbDojNTU1NTU1fS5zMXtmaWxsOnVybCgjZzEpfS5zMntmaWxsOiM2MDYwNjB9PC9zdHlsZT48ZyBjbGlwLXBhdGg9InVybCgjY3AxKSI+PHBhdGggY2xhc3M9InMwIiBkPSJtNTYuMiAxMi44YzMgNC4yIDIgMTAtMi4yIDEyLjljLTQuMiAzLTEwIDIuMS0xMy0yLjFsLTYuMi04LjZxLTAuMi0wLjQtMC42LTAuN2MtMi4xLTIuMS01LjYtMi03LjYgMC4xYy0xLjEgMS0xLjYgMi4zLTEuNiAzLjdjMCAxLjUgMC42IDMgMS43IDRxMC4yIDAuMiAwLjIgMC41YzAgMC4yLTAuMSAwLjMtMC4xIDAuNGwtMS40IDJjLTAuMSAwLjItMC40IDAuNC0wLjYgMC40Yy0wLjMgMC0wLjUtMC4xLTAuNi0wLjNjLTEuNS0xLjMtMi41LTMtMi45LTVxMCAwIDAgMHEtMC4xLTAuNS0wLjEtMC45di0wLjFxLTAuMS0wLjQtMC4xLTAuOWMwLTUuMSA0LjItOS4zIDkuNC05LjNjMyAwIDUuOSAxLjUgNy42IDMuOWw2LjEgOC41YzEgMS40IDIuNiAyLjIgNC40IDIuMmMyLjkgMCA1LjMtMi40IDUuMy01LjN2LTAuMWMwLTAuMSAwLTAuMyAwLTAuNGMtMC4xLTAuOS0wLjQtMS42LTAuOC0yLjNxLTAuNC0wLjctMC45LTEuMnEtMC4yLTAuMi0wLjItMC41cTAtMC4yIDAuMS0wLjRsMS41LTIuMWMwLjItMC4yIDAuNC0wLjMgMC42LTAuM3EwLjMgMCAwLjUgMC4ycTAuNCAwLjQgMC44IDAuOWwwLjEgMC4xYzAuMiAwLjEgMC4zIDAuNCAwLjUgMC41cTAgMC4xIDAuMSAwLjJ6IiAvPjxwYXRoIGNsYXNzPSJzMSIgZD0ibTUwLjYgMTAuMWwtMS43IDIuNWMtMC4xIDAuMi0wLjMgMC4zLTAuNiAwLjNjLTEuNyAwLjItMy4xIDEtNC4xIDIuM2wtNiA4LjRjLTEuNSAyLjItNCAzLjYtNi42IDMuOXEtMS40IDAtMi44LTAuMWMtMC4xLTAuMS0wLjEtMC4xLTAuMi0wLjFjLTAuMy0wLjMtMC40LTAuNy0wLjEtMWwxLjYtMi4zbDAuMS0wLjFjMC4xLTAuMiAwLjMtMC4zIDAuNS0wLjNjMS43IDAgMy4zLTAuOSA0LjItMi4zbDYuMS04LjVjMS41LTIuMiAzLjktMy42IDYuNS0zLjloMC40cTEuMS0wLjEgMi4yIDBjMC40IDAgMC43IDAuNCAwLjcgMC43YzAgMC4yLTAuMSAwLjMtMC4yIDAuNXoiIC8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iczIiIGQ9Im0xOC45IDEwLjN2MTQuMWMwIDcuNy0zLjMgMTEuNi05LjggMTEuNmMtMy4yIDAtNi4yLTEuNi03LjgtNC4zYy0wLjItMC4yLTAuMi0wLjQtMC4xLTAuNmMwLTAuMiAwLjItMC40IDAuNC0wLjVjMC41LTAuMyAxLjMtMC43IDEuOS0xYzAuMy0wLjEgMC44IDAgMSAwLjNjMS4xIDEuNSAyLjggMi41IDQuNiAyLjVjMy45IDAgNS45LTIuNCA2LTcuM2MtMS4yIDEuNi0zLjUgMi42LTYgMi42Yy01LjMgMC05LjEtMy45LTkuMS05LjJjMC01LjQgMy45LTkuNCA5LjEtOS40YzIgMCAzLjkgMC43IDUuNCAycTAuMSAwLjEgMC4yIDAuMWMwLjIgMCAwLjMtMC4yIDAuMy0wLjN2LTAuNmMwLTAuNSAwLjQtMC45IDAuOS0wLjloMi4yYzAuNSAwLjEgMC44IDAuNCAwLjggMC45em0tMy45IDguMWMwLTMuOC0yLjktNS41LTUuNi01LjVxLTAuMSAwLTAuMiAwYy0zIDAuMS01LjMgMi42LTUuMiA1LjVjMCAzLjIgMi4zIDUuNSA1LjQgNS41YzIuNyAwIDUuNi0xLjkgNS42LTUuNXoiIC8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iczAiIGQ9Im03OC42IDAuOHYyNS43YzAgMC41LTAuNCAwLjktMC44IDAuOWgtMi4zYy0wLjQgMC0wLjgtMC40LTAuOC0wLjl2LTAuNXEwLTAuMS0wLjEtMC4yYy0wLjEtMC4xLTAuMy0wLjEtMC41IDBjLTEuNSAxLjMtMy40IDEuOS01LjMgMS45Yy01LjMgMC05LjEtMy45LTkuMS05LjNjMC01LjQgMy44LTkuMyA5LTkuM2MyLjEgMCA0LjEgMC43IDUuNCAxLjlxMC4xIDAgMC4yIDBjMC4yIDAgMC4zLTAuMSAwLjMtMC4zdi05LjljMC0wLjQgMC40LTAuOCAwLjktMC44aDIuMmMwLjUgMCAwLjkgMC40IDAuOSAwLjh6bS05LjYgMTIuMWMtMy4xIDAtNS40IDIuMy01LjQgNS40YzAgMy4yIDIuNCA1LjYgNS40IDUuNmMyLjcgMCA1LjYtMS44IDUuNi01LjZjMC0zLjUtMi44LTUuNC01LjYtNS40eiIgLz48cGF0aCBjbGFzcz0iczAiIGQ9Im04My4yIDBoMi4zYzAuNSAwIDAuOSAwLjQgMC45IDAuOHYyNS43YzAgMC41LTAuNCAwLjktMC45IDAuOWgtMi4zYy0wLjQgMC0wLjgtMC40LTAuOC0wLjl2LTI1LjdjMC0wLjQgMC40LTAuOCAwLjgtMC44eiIgLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsYXNzPSJzMCIgZD0ibTEwNi43IDE4LjNxMCAwLjQgMCAwLjhjMCAwLjUtMC4zIDAuOC0wLjggMC44aC0xM2MtMC4xIDAtMC4yIDAtMC4zIDAuMWMwIDAuMSAwIDAuMiAwIDAuM2MwLjYgMi4zIDIuNiAzLjggNS4zIDMuOGMxLjggMC4xIDMuNS0wLjcgNC42LTIuMmMwLjItMC4zIDAuNi0wLjQgMC45LTAuMnEwLjUgMC4yIDEuMSAwLjRjMC4zIDAgMC41IDAuMiAwLjggMC4yYzAuMSAwIDAuMSAwLjEgMC4yIDAuMWMwLjMgMC4yIDAuNSAwLjcgMC4yIDEuMWMtMS41IDIuNi00LjQgNC4yLTcuOSA0LjJjLTUuNCAwLTkuMy00LTkuMy05LjRjMC01LjQgMy45LTkuMiA5LjMtOS4yYzUuMiAwIDguOSAzLjggOC45IDkuMnptLTE0LjEtMS43YzAuMSAwLjEgMC4yIDAuMiAwLjMgMC4yYzAgMCA5LjUgMCA5LjYgMGMwLjItMC4xIDAuMy0wLjMgMC4yLTAuNGMtMC41LTIuNC0yLjQtMy44LTQuOS0zLjhjLTIuNiAwLTQuNiAxLjUtNS4yIDMuOGMwIDAuMSAwIDAuMiAwIDAuMnoiIC8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iczAiIGQ9Im0xMjcuNiAxMC4zdjE2LjNjMCAwLjQtMC40IDAuOC0wLjkgMC44aC0yLjJjLTAuNSAwLTAuOC0wLjQtMC44LTAuOHYtMC42YzAtMC4xLTAuMS0wLjMtMC4yLTAuM2MtMC4xLTAuMS0wLjMgMC0wLjMgMGMtMS42IDEuMy0zLjUgMi01LjQgMmMtNS4zIDAtOS4yLTMuOS05LjItOS4zYzAtNS40IDMuOS05LjMgOS4yLTkuM2MxLjkgMCAzLjggMC42IDUuNCAxLjlxMC4xIDAuMSAwLjMgMGMwLjEgMCAwLjItMC4xIDAuMi0wLjJ2LTAuNWMwLTAuNSAwLjMtMC45IDAuOC0wLjloMi4yYzAuNSAwLjEgMC44IDAuNCAwLjkgMC45em0tOS41IDIuNnEtMC4yIDAtMC40IDBjLTIuOSAwLjEtNS4yIDIuNS01LjEgNS40YzAgMy4yIDIuNCA1LjYgNS41IDUuNmMyLjYgMCA1LjUtMS44IDUuNS01LjZjMC0zLjUtMi44LTUuNC01LjUtNS40eiIgLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsYXNzPSJzMCIgZD0ibTE0OS4xIDE4LjRjMCA1LjQtMy44IDkuMy05IDkuM2MtMiAwLTMuOS0wLjYtNS40LTEuOXEtMC4xLTAuMS0wLjMtMC4xYy0wLjEgMC4xLTAuMiAwLjItMC4yIDAuM3Y4LjljMCAwLjUtMC40IDAuOS0wLjggMC45aC0yLjNjLTAuNSAwLTAuOS0wLjQtMC45LTAuOXYtMjQuN2MwLTAuNCAwLjQtMC44IDAuOS0wLjhoMi4zYzAuNSAwIDAuOSAwLjQgMC45IDAuOHYwLjZjMCAwLjEgMCAwLjIgMC4xIDAuM2MwLjEgMC4xIDAuMyAwIDAuNC0wLjFjMS40LTEuMiAzLjMtMiA1LjMtMS45YzUuMiAwIDkgMy45IDkgOS4zem0tOS40LTUuNWMtMi42IDAtNS40IDEuNy01LjQgNS42YzAgMy42IDIuNyA1LjQgNS40IDUuNGMzLjIgMCA1LjUtMi4yIDUuNS01LjRjMC0zLjMtMi4zLTUuNi01LjUtNS42eiIgLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsYXNzPSJzMCIgZD0ibTE0OS4zIDhxMC0wLjQgMC4yLTAuN3EwLjEtMC4zIDAuMy0wLjZxMC4zLTAuMiAwLjYtMC4zcTAuMy0wLjIgMC43LTAuMnEwLjQgMCAwLjcgMC4ycTAuNCAwLjEgMC42IDAuM3EwLjMgMC4zIDAuNCAwLjZxMC4xIDAuMyAwLjEgMC43cTAgMC40LTAuMSAwLjdxLTAuMSAwLjQtMC40IDAuNnEtMC4yIDAuMy0wLjYgMC40cS0wLjMgMC4xLTAuNyAwLjFxLTAuNCAwLTAuNy0wLjFxLTAuMy0wLjEtMC42LTAuNHEtMC4yLTAuMi0wLjMtMC42Yy0wLjEtMC4yLTAuMi0wLjQtMC4yLTAuN3ptMC4zIDBxMCAwLjMgMC4xIDAuNnEwLjEgMC40IDAuMyAwLjVxMC4yIDAuMiAwLjUgMC40YzAuMiAwLjEgMC40IDAuMSAwLjcgMC4xcTAuMyAwIDAuNi0wLjFxMC4zLTAuMiAwLjUtMC40cTAuMi0wLjEgMC4zLTAuNWMwLjEtMC4yIDAuMS0wLjMgMC4xLTAuNnEwLTAuMy0wLjEtMC42cS0wLjEtMC4zLTAuMy0wLjVxLTAuMi0wLjItMC41LTAuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNi0wLjFxLTAuMyAwLTAuNyAwLjFxLTAuMyAwLjEtMC41IDAuM3EtMC4yIDAuMi0wLjMgMC41cS0wLjEgMC4zLTAuMSAwLjZ6bTAuOSAxLjF2LTIuMWgwLjhxMC40LTAuMSAwLjUgMC4xYzAuMSAwLjEgMC4yIDAuMyAwLjIgMC40cTAgMC4yIDAgMC4zcS0wLjEgMC4xLTAuMiAwLjFjMCAwLjEtMC4xIDAuMS0wLjEgMC4yYy0wLjEgMC0wLjIgMC0wLjIgMGwwLjYgMC45aC0wLjNsLTAuNi0wLjloLTAuNHYxem0wLjgtMS4yYzAuMSAwIDAuMSAwIDAuMiAwYzAtMC4xIDAuMS0wLjEgMC4xLTAuMnEwLjEgMCAwLjEtMC4ycTAtMC4xLTAuMS0wLjFxMC0wLjEtMC4xLTAuMnEtMC4xIDAtMC4yIDBjMCAwLTAuMSAwLTAuMSAwaC0wLjV2MC43YzAuMSAwIDAuNSAwIDAuNiAweiIgLz48L2c+PC9zdmc+"
                }
            ],
            "responseMessage": "my test string",
            "errors": []
        }
    '''
    return testPlayload

# form request to POST

def send_request():
    requestPayload = get_payload()
    data = json.loads(requestPayload)
    r = requests.post(endpointURL, auth=(
        authUser, authPass), json=data)
    print(r.status_code)
    print(r.text)    

def main():
    check_connection()
    send_request()

if __name__ == '__main__':
    sys.exit(main())
